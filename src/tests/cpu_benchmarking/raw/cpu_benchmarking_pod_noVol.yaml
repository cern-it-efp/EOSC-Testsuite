apiVersion: v1
kind: Pod
metadata:
  name: hep-bmk-pod
  namespace: default
  labels:
    test: test-pod
spec:
  hostNetwork: true
  containers:
  - name: hep-benchmark-suite
    image: gitlab-registry.cern.ch/hep-benchmarks/hep-benchmark-suite/hep-benchmark-suite-cc7:prior
    imagePullPolicy: Always
    securityContext:
      privileged: true
    command: ["/bin/sh","-c"]
    args: # TODO use -export
      #- rm -rf $BMK_RUNDIR ; # TODO - still needed?
      #  -o # TODO - this has to be defined in my cfgs.yaml file
      #  --freetext="Run as part of the Cloud Provider Validation Test-Suite CERN" --cloud="PROVIDER_PH" # TODO - add these
      # ------------
      - python3 -m pip install --user git+https://gitlab.cern.ch/hep-benchmarks/hep-benchmark-suite.git ;
        ~/.local/bin/bmkrun -c default &&
        tail -f /dev/null
