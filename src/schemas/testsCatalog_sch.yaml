type: object
required:
    - s3Test
    - dataRepatriationTest
    - cpuBenchmarking
    - perfsonarTest
    - dlTest
    - hpcTest
    - dodasTest
properties:
    s3Test:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
        if:
            properties:
                run:
                    const: true
        then:
            required:
                - endpoint
                - accessKey
                - secretKey
            properties:
                endpoint:
                    type: string
                accessKey:
                    type: string
                secretKey:
                    type: string
    dataRepatriationTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
    cpuBenchmarking:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
    perfsonarTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
        if:
            properties:
                run:
                    const: true
        then:
            required:
                - endpoint
            properties:
                endpoint:
                    type: string
    dlTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
        if:
            properties:
                run:
                    const: true
        then:
            required:
                - nodes
                - flavor
                - epochs
                - benchmark
                - datasetSize
            properties:
                nodes:
                    type: integer
                    minimum: 1
                flavor:
                    type: string
                epochs:
                    type: integer
                    minimum: 1
                benchmark:
                    type: string
                    enum: [nnlo, mpi_learn]
                datasetSize:
                    type: integer
                    minimum: 1
                    maximum: 65
    proGANTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
        if:
            properties:
                run:
                    const: true
        then:
            required:
                - flavor
                - images_amount
            properties:
                flavor:
                    type: string
                images_amount: # TODO: this would be the data set size, and 'kimg' would provide epochs (kimg * 1000 / nimgs = epochs). 
                    type: integer
                    minimum: 1
                    maximum: 202599
    hpcTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
        if:
            properties:
                run:
                    const: true
        then:
            required:
                - nodes
                - flavor
            properties:
                nodes:
                    type: integer
                    minimum: 1
                flavor:
                    type: string
    dodasTest:
        type: object
        required:
            - run
        properties:
            run:
                type:
                    - boolean
                    - "null"
additionalProperties: false
